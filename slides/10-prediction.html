<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.550">

  <meta name="author" content="Juan F. Tellez">
  <meta name="dcterms.date" content="2024-09-30">
  <title>The Scientific Study of Politics - Prediction</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
  <link href="../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="../site_libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#dc354a" data-background-image="img/dubois-spiral-2.png" data-background-position="right" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Prediction</h1>
  <p class="subtitle">POL51</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Juan F. Tellez 
</div>
        <p class="quarto-title-affiliation">
            University of California, Davis
          </p>
    </div>
</div>

  <p class="date">September 30, 2024</p>
</section>
<section id="plan-for-today" class="title-slide slide level1 center" data-background-color="#dc354a">
<h1>Plan for today</h1>
<div class="fragment">
<p>Making predictions</p>
</div>
<div class="fragment">
<p>Multiple regression</p>
</div>
<div class="fragment">
<p>How right are we?</p>
</div>
</section>

<section>
<section id="why-predict" class="title-slide slide level1 center">
<h1>Why predict?</h1>

</section>
<section id="why-predict-1" class="slide level2">
<h2>Why predict?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">Companies, policymakers, and academics want to predict</li>
<li class="fragment">who will win an election</li>
<li class="fragment">whether UN peacekeepers can reduce conflict</li>
<li class="fragment">whether you’ll get the vaccine or not</li>
<li class="fragment">At stake is what decision to take under <strong>uncertainty about the future</strong></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/prediction.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="making-predictions" class="slide level2">
<h2>Making predictions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The basics of prediction are pretty straightforward:</p>
<ol type="1">
<li class="fragment">Take/collect existing data ✅</li>
<li class="fragment">Fit a model to it ✅</li>
<li class="fragment">Design a <strong>scenario</strong> you want a prediction for ☑️</li>
<li class="fragment">Use the model to generate an <strong>estimate</strong> for that scenario ☑️</li>
</ol>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/tea-reading.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="whats-the-scenario" class="slide level2">
<h2>What’s the scenario?</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li class="fragment">A scenario is a hypothetical <strong>observation</strong> (real, or imagined) that we want a prediction for</li>
<li class="fragment">You define a scenario by picking <strong>values</strong> for explanatory variables</li>
<li class="fragment">Example: what is the predicted fuel efficiency for a car that <em>weighs 3 tons</em>?</li>
<li class="fragment">Example: what vote share should we expect for Democrats in a county with a <em>median income of 45k</em>, a <em>large urban center</em>, and where the <em>percent of non-white residents is 50%</em>?</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/scenario.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="prediction-by-hand" class="slide level2">
<h2>Prediction (by hand)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>weight_model <span class="ot">=</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remeber our model is an equation:</p>
<div class="fragment">
<p><span class="math inline">\(\widehat{mpg} = 37.29 - 5.34(wt)\)</span></p>
</div>
<div class="fragment">
<p>We only have one explanatory variable to work with (<code>wt</code>), so our scenario can only rely on weight</p>
</div>
<div class="fragment">
<p><strong>Scenario</strong>: a car that weights 3.25 tons <span class="math inline">\(\rightarrow\)</span> what fuel efficiency should we expect?</p>
</div>
<div class="fragment">
<p>To get an estimate of <code>mpg</code>, we simply plug in the value of “weight” we are interested in:</p>
</div>
<div class="fragment">
<p>Estimate for weight = <span class="red">3.25</span></p>
<p><span class="math inline">\(\widehat{mpg} = 37.29 - 5.34 \times \color{red}{3.25} = 19.935\)</span></p>
</div>
</section>
<section id="prediction-in-r" class="slide level2">
<h2>Prediction (in R)</h2>
<p>First <strong>define the scenario</strong> we want a prediction for, using <code>crossing()</code></p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>weight_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="fl">3.25</span>) </span>
<span id="cb2-2"><a></a>weight_scenario</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
     wt
  &lt;dbl&gt;
1  3.25</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Note that I store this as a data object</p>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>the variables in <code>crossing</code> have to have the same name as the variables in the model</p>
</div>
</div>
</div>
</div>
</section>
<section id="prediction-in-r-1" class="slide level2">
<h2>Prediction (in R)</h2>
<p>We can then combine our scenario with our model using <code>augment()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">augment</span>(weight_model, <span class="at">newdata =</span> weight_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
     wt .fitted
  &lt;dbl&gt;   &lt;dbl&gt;
1  3.25    19.9</code></pre>
</div>
</div>
<div class="fragment">
<p><code>augment</code> takes the values for our scenario and plugs them in to our model equation to get an estimate</p>
</div>
<div class="fragment">
<p>Note we got the same answer as when we did it by hand</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>We tell <code>augment</code> what our new scenario is using the <code>newdata =</code> argument</p>
</div>
</div>
</div>
</div>
</section>
<section id="multiple-scenarios" class="slide level2">
<h2>Multiple scenarios</h2>
<p>We can also look at multiple scenarios, maybe a light, medium, and heavy car:</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>weight_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="dv">3</span>, <span class="dv">5</span>)) </span>
<span id="cb6-2"><a></a>weight_scenario</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
     wt
  &lt;dbl&gt;
1   1.5
2   3  
3   5  </code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>And then use <code>augment</code> to get the estimates:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">augment</span>(weight_model, <span class="at">newdata =</span> weight_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
     wt .fitted
  &lt;dbl&gt;   &lt;dbl&gt;
1   1.5    29.3
2   3      21.3
3   5      10.6</code></pre>
</div>
</div>
</div>
</section>
<section id="sequence-of-scenarios" class="slide level2">
<h2>Sequence of scenarios</h2>
<p>Or we can look at a <em>sequence</em> of scenarios using the <code>seq()</code> function</p>
<div class="fragment">
<p>Example: estimates for every weight between 2 and 6 tons, in .1 ton increments</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>seq_weights <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">6</span>, <span class="at">by =</span> .<span class="dv">1</span>)) </span>
<span id="cb10-2"><a></a>seq_weights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41 × 1
      wt
   &lt;dbl&gt;
 1   2  
 2   2.1
 3   2.2
 4   2.3
 5   2.4
 6   2.5
 7   2.6
 8   2.7
 9   2.8
10   2.9
# ℹ 31 more rows</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><code>seq</code> needs a starting point (<code>from</code>), an end point (<code>to</code>), and an interval (<code>by</code>)</p>
</div>
</div>
</div>
</div>
</section>
<section id="prediction-in-r-2" class="slide level2">
<h2>Prediction (in R)</h2>
<p>And then get predictions for all these scenarios:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">augment</span>(weight_model, <span class="at">newdata =</span> seq_weights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41 × 2
      wt .fitted
   &lt;dbl&gt;   &lt;dbl&gt;
 1   2      26.6
 2   2.1    26.1
 3   2.2    25.5
 4   2.3    25.0
 5   2.4    24.5
 6   2.5    23.9
 7   2.6    23.4
 8   2.7    22.9
 9   2.8    22.3
10   2.9    21.8
# ℹ 31 more rows</code></pre>
</div>
</div>
</section>
<section id="trivial" class="slide level2">
<h2>Trivial</h2>
<p>Do we really need a model to predict MPG when weight = 3.25? Probably not</p>

<img data-src="10-prediction_files/figure-revealjs/unnamed-chunk-11-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="multiple-regression" class="slide level2">
<h2>Multiple regression</h2>
<p>The real power of modeling and prediction comes with using multiple explanatory variables</p>
<div class="fragment">
<p>Many factors influence a car’s fuel efficiency; we can use that information to make more precise predictions</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mpg</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">wt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">am</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Merc 450SE</td>
<td style="text-align: right;">16.4</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">3.21</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Merc 230</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Maserati Bora</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">3.57</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
</section>
<section id="multiple-regression-1" class="slide level2">
<h2>Multiple regression</h2>
<p>Here, a car’s fuel efficiency is a function of its weight (<code>wt</code>), number of cylinders (<code>cyl</code>), horse power (<code>hp</code>), and whether its transmission is manual or automatic (<code>am</code>)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>big_model <span class="ot">=</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> cyl <span class="sc">+</span> hp <span class="sc">+</span> am, <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>The model equation we want in the end is this one:</p>
<p><span class="math display">\[\operatorname{mpg} = \beta_0 + \color{red}{\beta_{1}}(\operatorname{wt}) + \color{red}{\beta_{2}}(\operatorname{cyl}) + \color{red}{\beta_{3}}(\operatorname{hp}) + \color{red}{\beta_{4}}(\operatorname{am})\]</span></p>
</div>
</section></section>
<section>
<section id="multiple-regression-2" class="title-slide slide level1 center">
<h1>Multiple regression</h1>

</section>
<section id="multiple-regression-3" class="slide level2">
<h2>Multiple regression</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment"><p>Just as when we had one variable, our OLS model is trying to find the values of <span class="math inline">\(\beta\)</span> that “best” fits the data</p></li>
<li class="fragment"><p>OLS estimator = <span class="math inline">\(\sum{(Y_i - \hat{Y_i})^2}\)</span></p></li>
<li class="fragment"><p>Where <span class="math inline">\(\widehat{Y} = \beta_0 + \beta_1 x_1 + . . . \beta_4 x_4\)</span></p></li>
<li class="fragment"><p>Now searching for <span class="math inline">\(\beta_0 ... \beta_4\)</span> to minimize loss function</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/spin-plates.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p><em><code>lm()</code> hard at work</em></p>
</div>
</div>
</section>
<section id="interpretation" class="slide level2">
<h2>Interpretation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">36.15</td>
</tr>
<tr class="even">
<td style="text-align: left;">wt</td>
<td style="text-align: right;">-2.61</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cyl</td>
<td style="text-align: right;">-0.75</td>
</tr>
<tr class="even">
<td style="text-align: left;">hp</td>
<td style="text-align: right;">-0.02</td>
</tr>
<tr class="odd">
<td style="text-align: left;">am</td>
<td style="text-align: right;">1.48</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li class="fragment">wt = every ton of weight is associated with a 2.61 decrease in mpg</li>
<li class="fragment">cyl = every cylinder is associated with a .7 decrease in mpg</li>
<li class="fragment">hp = every unit of horse power is associated with a .02 decrease in mpg</li>
<li class="fragment">am = on average, cars with manual transmissions (<code>am = 1</code>) have 1.48 more mpg than cars with automatic transmissions (<code>am = 0</code>)</li>
</ul>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note how the estimate on weight changed as we added more variables</p>
</div>
</div>
</div>
</div>
</section>
<section id="prediction-by-hand-1" class="slide level2">
<h2>Prediction (by hand)</h2>
<p>We can make predictions just as before, plugging in values for our explanatory variables</p>
<p><span class="math display">\[
\operatorname{\widehat{mpg}} = 36.15 - 2.61(\operatorname{wt}) - 0.75(\operatorname{cyl}) - 0.02(\operatorname{hp}) + 1.48(\operatorname{am})
\]</span></p>
<div class="fragment">
<p>With more variables, we can create more specific <strong>scenarios</strong></p>
</div>
<div class="fragment">
<p>For example: a car that weighs 3 tons, has 4 cylinders, 120 horsepower, and has a manual transmission</p>
</div>
<div class="fragment">
<p><span class="math display">\[
\operatorname{\widehat{mpg}} = 36.15 - 2.61 \times \color{blue}{3} - 0.75 \times  \color{blue}{4} - 0.02 \times  \color{blue}{120} + 1.48 \times  \color{blue}{1}
\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[
\operatorname{\widehat{mpg}} = 24
\]</span></p>
</div>
</section>
<section id="prediction-in-r-3" class="slide level2">
<h2>Prediction (in R)</h2>
<p>We can do this in R with <code>crossing()</code> and <code>augment()</code></p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>big_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="dv">3</span>, <span class="at">cyl =</span> <span class="dv">4</span>, <span class="at">hp =</span> <span class="dv">120</span>, <span class="at">am =</span> <span class="dv">1</span>)</span>
<span id="cb15-2"><a></a></span>
<span id="cb15-3"><a></a><span class="fu">augment</span>(big_model, <span class="at">newdata =</span> big_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
     wt   cyl    hp    am .fitted
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1     3     4   120     1    23.8</code></pre>
</div>
</div>
</div>
</section>
<section id="troubleshooting" class="slide level2">
<h2>Troubleshooting</h2>
<p>Note that your scenario needs to include every variable in your model, otherwise you will get an error</p>
<div class="fragment">
<p>The one below is missing cylinders, which is in <code>big_model</code>, and won’t run:</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>bad_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="dv">3</span>, </span>
<span id="cb17-2"><a></a>                      <span class="at">hp =</span> <span class="dv">120</span>,</span>
<span id="cb17-3"><a></a>                      <span class="at">am =</span> <span class="dv">1</span>)</span>
<span id="cb17-4"><a></a></span>
<span id="cb17-5"><a></a><span class="fu">augment</span>(big_model, <span class="at">newdata =</span> bad_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pick-scenarios-that-make-sense" class="slide level2">
<h2>Pick scenarios that make sense</h2>
<div class="fragment">
<p>Note that to make predictions that make sense, we have to look through our data and see what values are plausible for the variables</p>
</div>
<div class="fragment">
<p>For example, a scenario where we set <code>am</code> = 3 doesn’t make sense, since <code>am</code> is a dummy variable that takes two values (0 = automatic, 1 = manual)</p>
</div>
<div class="fragment">
<p>But R doesn’t know that, and will give you (nonsensical) estimates:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>crazy_car <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="dv">3</span>, <span class="at">cyl =</span> <span class="dv">4</span>, <span class="at">hp =</span> <span class="dv">120</span>, <span class="at">am =</span> <span class="dv">3</span>)</span>
<span id="cb18-2"><a></a><span class="fu">augment</span>(big_model, <span class="at">newdata =</span> crazy_car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
     wt   cyl    hp    am .fitted
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1     3     4   120     3    26.8</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Remember <code>data |&gt; distinct(variable)</code> to see a variable’s values</p>
</div>
</div>
</div>
</div>
</section>
<section id="holding-all-else-constant" class="slide level2">
<h2>Holding all else constant</h2>
<p>One cool part of <strong>multiple regression</strong> is that we can see what happens to our estimates when one variable changes but the others are held at a fixed value</p>
<div class="fragment">
<p><em>Holding all else in the model constant</em>, how does increasing a car’s horsepower change its fuel efficiency?</p>
</div>
<div class="fragment">
<p>We can use <code>seq()</code> to see what happens when horsepower changes while everything else is left at a fixed value</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>varying_hp <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">wt =</span> <span class="dv">3</span>, <span class="at">cyl =</span> <span class="dv">4</span>, <span class="at">am =</span> <span class="dv">1</span>, <span class="at">hp =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">50</span>, <span class="at">to =</span> <span class="dv">340</span>, <span class="at">by =</span> <span class="dv">5</span>))</span>
<span id="cb20-2"><a></a></span>
<span id="cb20-3"><a></a><span class="fu">augment</span>(big_model, <span class="at">newdata =</span> varying_hp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 59 × 5
      wt   cyl    am    hp .fitted
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1     3     4     1    50    25.6
 2     3     4     1    55    25.5
 3     3     4     1    60    25.3
 4     3     4     1    65    25.2
 5     3     4     1    70    25.1
 6     3     4     1    75    25.0
 7     3     4     1    80    24.8
 8     3     4     1    85    24.7
 9     3     4     1    90    24.6
10     3     4     1    95    24.5
# ℹ 49 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="visualizing-predictions" class="slide level2">
<h2>Visualizing predictions</h2>
<p>We could then store our estimate, and use it for plotting</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>hp_pred <span class="ot">=</span> <span class="fu">augment</span>(big_model, <span class="at">newdata =</span> varying_hp)</span>
<span id="cb22-2"><a></a><span class="fu">ggplot</span>(hp_pred, <span class="fu">aes</span>(<span class="at">x =</span> hp, <span class="at">y =</span> .fitted)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="10-prediction_files/figure-revealjs/unnamed-chunk-20-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:70.0%"></section>
<section id="one-more-example-gapminder" class="slide level2">
<h2>One more example: Gapminder</h2>
<p>Say we wanted to predict a country’s life expectancy, using population, GDP per capita, the year, and what continent it is in:</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>life_model <span class="ot">=</span> <span class="fu">lm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> pop <span class="sc">+</span> year <span class="sc">+</span> continent, <span class="at">data =</span> gapminder)</span>
<span id="cb23-2"><a></a><span class="fu">tidy</span>(life_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 5
  term              estimate std.error statistic   p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)       -5.18e+2   1.99e+1    -26.1  3.25e-126
2 gdpPercap          2.98e-4   2.00e-5     14.9  2.52e- 47
3 pop                1.79e-9   1.63e-9      1.10 2.73e-  1
4 year               2.86e-1   1.01e-2     28.5  4.80e-146
5 continentAmericas  1.43e+1   4.95e-1     28.9  1.18e-149
6 continentAsia      9.38e+0   4.72e-1     19.9  3.80e- 79
7 continentEurope    1.94e+1   5.18e-1     37.4  2.03e-223
8 continentOceania   2.06e+1   1.47e+0     14.0  3.39e- 42</code></pre>
</div>
</div>
</div>
</section>
<section id="predicting-health" class="slide level2">
<h2>Predicting health</h2>
<p><strong>Scenario</strong>: what if we wanted to predict the life expectancy of a country with a GDP per capita of $7,000, a population of 20 million, in the year 2005, in Asia?</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>life_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">gdpPercap =</span> <span class="dv">7000</span>, </span>
<span id="cb25-2"><a></a>                       <span class="at">pop =</span> <span class="dv">20000000</span>, <span class="at">year =</span> <span class="dv">2005</span>, </span>
<span id="cb25-3"><a></a>                       <span class="at">continent =</span> <span class="st">"Asia"</span>)</span>
<span id="cb25-4"><a></a><span class="fu">augment</span>(life_model, <span class="at">newdata =</span> life_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  gdpPercap      pop  year continent .fitted
      &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
1      7000 20000000  2005 Asia         67.0</code></pre>
</div>
</div>
</div>
</section>
<section id="imaginary-changes" class="slide level2">
<h2>Imaginary changes</h2>
<p>What if we could “dial up” this country’s GDP slowly? How would its life expectancy change?</p>
<div class="fragment">
<p><strong>Scenario</strong>: we can vary GDP and keep all else constant</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>life_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">gdpPercap =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5000</span>, <span class="at">to =</span> <span class="dv">100000</span>, <span class="at">by =</span> <span class="dv">5000</span>), </span>
<span id="cb27-2"><a></a>                       <span class="at">pop =</span> <span class="dv">20000000</span>, <span class="at">year =</span> <span class="dv">2005</span>, </span>
<span id="cb27-3"><a></a>                       <span class="at">continent =</span> <span class="st">"Asia"</span>)</span>
<span id="cb27-4"><a></a><span class="fu">augment</span>(life_model, <span class="at">newdata =</span> life_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 5
   gdpPercap      pop  year continent .fitted
       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1      5000 20000000  2005 Asia         66.4
 2     10000 20000000  2005 Asia         67.9
 3     15000 20000000  2005 Asia         69.4
 4     20000 20000000  2005 Asia         70.9
 5     25000 20000000  2005 Asia         72.4
 6     30000 20000000  2005 Asia         73.9
 7     35000 20000000  2005 Asia         75.4
 8     40000 20000000  2005 Asia         76.8
 9     45000 20000000  2005 Asia         78.3
10     50000 20000000  2005 Asia         79.8
11     55000 20000000  2005 Asia         81.3
12     60000 20000000  2005 Asia         82.8
13     65000 20000000  2005 Asia         84.3
14     70000 20000000  2005 Asia         85.8
15     75000 20000000  2005 Asia         87.3
16     80000 20000000  2005 Asia         88.8
17     85000 20000000  2005 Asia         90.3
18     90000 20000000  2005 Asia         91.8
19     95000 20000000  2005 Asia         93.3
20    100000 20000000  2005 Asia         94.8</code></pre>
</div>
</div>
</div>
</section>
<section id="imaginary-scenarios" class="slide level2">
<h2>Imaginary scenarios</h2>
<p>How different would this all look in different continents? We can vary continents too:</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>life_continent_scenario <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">gdpPercap =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5000</span>, <span class="at">to =</span> <span class="dv">100000</span>, <span class="at">by =</span> <span class="dv">5000</span>), </span>
<span id="cb29-2"><a></a>                       <span class="at">pop =</span> <span class="dv">20000000</span>, <span class="at">year =</span> <span class="dv">2005</span>, </span>
<span id="cb29-3"><a></a>                       <span class="at">continent =</span> <span class="fu">c</span>(<span class="st">"Asia"</span>, <span class="st">"Africa"</span>, <span class="st">"Americas"</span>, <span class="st">"Europe"</span>)) </span>
<span id="cb29-4"><a></a><span class="fu">augment</span>(life_model, <span class="at">newdata =</span> life_continent_scenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 80 × 5
   gdpPercap      pop  year continent .fitted
       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1      5000 20000000  2005 Africa       57.0
 2      5000 20000000  2005 Americas     71.3
 3      5000 20000000  2005 Asia         66.4
 4      5000 20000000  2005 Europe       76.4
 5     10000 20000000  2005 Africa       58.5
 6     10000 20000000  2005 Americas     72.8
 7     10000 20000000  2005 Asia         67.9
 8     10000 20000000  2005 Europe       77.9
 9     15000 20000000  2005 Africa       60.0
10     15000 20000000  2005 Americas     74.3
# ℹ 70 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="predicting-health-1" class="slide level2">
<h2>Predicting health</h2>
<p>We can then save our predictions as an object, and plot them:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>pred_health <span class="ot">=</span> <span class="fu">augment</span>(life_model, <span class="at">newdata =</span> life_continent_scenario)</span>
<span id="cb31-2"><a></a><span class="fu">ggplot</span>(pred_health, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> .fitted, <span class="at">color =</span> continent)) <span class="sc">+</span> </span>
<span id="cb31-3"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="10-prediction_files/figure-revealjs/unnamed-chunk-25-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:70.0%"></section>
<section id="your-turn-colonial-fire-sale" class="slide level2">
<h2>Your turn: 🤴 Colonial fire sale 🤴</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">During the 1600s and 1700s the Spanish Crown would sell colonial governorships to raise money</li>
<li class="fragment">Governorships were valuable because you could tax / exploit the local population</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/charles-ii.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Charles II. His wife: <em>“The Catholic King is so ugly as to cause fear and he looks ill.”</em></p>
</div>
</div>
</section>
<section id="your-turn-colonial-fire-sale-1" class="slide level2">
<h2>Your turn: 🤴 Colonial fire sale 🤴</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">audiencia</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">provincia</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">provcode</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">time</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">name_approx</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">appointed</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">title_raw</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">military</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">orden</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nobility</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">noble</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rprice1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">suitindex</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">centerxgd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">centerygd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">z</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">distlima</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">bishop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cumwar</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">war</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">twowars</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yearfromwar</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop54</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ind54</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gov_reb</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mita</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mine</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">econactivity2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">wage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">reparto2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rep50</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">totalc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">tributonew</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">alcabala</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Lima</td>
<td style="text-align: left;">Calca y Lares</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">1715</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">F. De Lasagartua</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Civil</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3355.759</td>
<td style="text-align: right;">0.8926667</td>
<td style="text-align: right;">-71.95901</td>
<td style="text-align: right;">-13.35248</td>
<td style="text-align: right;">2905.222</td>
<td style="text-align: right;">570.81799</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-3</td>
<td style="text-align: right;">6199</td>
<td style="text-align: right;">5519</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1000</td>
<td style="text-align: right;">73600</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.98351</td>
<td style="text-align: right;">9.408453</td>
<td style="text-align: right;">8.451267</td>
<td style="text-align: right;">8.875287</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lima</td>
<td style="text-align: left;">Huarochiri</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">1692</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Pedro De Legaria</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Civil</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2044.352</td>
<td style="text-align: right;">0.0647667</td>
<td style="text-align: right;">-76.36739</td>
<td style="text-align: right;">-11.89083</td>
<td style="text-align: right;">3021.700</td>
<td style="text-align: right;">78.53205</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">14024</td>
<td style="text-align: right;">13084</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">140000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lima</td>
<td style="text-align: left;">Arequipa</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1683</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Francisco De Munon Y Torresgrosa</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Caballero orden de Santiago</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3130.726</td>
<td style="text-align: right;">0.0061818</td>
<td style="text-align: right;">-71.60053</td>
<td style="text-align: right;">-16.55599</td>
<td style="text-align: right;">1889.909</td>
<td style="text-align: right;">770.99956</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">37261</td>
<td style="text-align: right;">5929</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">123000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lima</td>
<td style="text-align: left;">Huamanga</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">1715</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Pedro De Velasco Y Lazarraga</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Militar - Capitan</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3273.911</td>
<td style="text-align: right;">0.8290000</td>
<td style="text-align: right;">-74.22577</td>
<td style="text-align: right;">-13.16026</td>
<td style="text-align: right;">2656.000</td>
<td style="text-align: right;">329.94941</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-3</td>
<td style="text-align: right;">25821</td>
<td style="text-align: right;">20373</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">63800</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lima</td>
<td style="text-align: left;">Jauja</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">1688</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Diego De Villatoro</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Civil - Guarda damas de la reina y Caballero de la Orden de Santiago</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3270.963</td>
<td style="text-align: right;">0.5898966</td>
<td style="text-align: right;">-75.28021</td>
<td style="text-align: right;">-11.94896</td>
<td style="text-align: right;">3253.586</td>
<td style="text-align: right;">193.32407</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">52286</td>
<td style="text-align: right;">28477</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1400</td>
<td style="text-align: right;">150000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="your-turn-colonial-fire-sale-2" class="slide level2">
<h2>Your turn: 🤴 Colonial fire sale 🤴</h2>
<p>Using <code>colony</code>:</p>
<ol type="1">
<li class="fragment"><p>How much would a noble (<code>noble</code>), without military experience (<code>military</code>) expect to pay (<code>rprice1</code>) for a governorship with a suitability index of .8 (<code>suitindex</code>) and a repartimiento (<code>reparto2</code>) of 98,000 pesos?</p></li>
<li class="fragment"><p>Adjust the scenario above so that the repartimiento quota increases from 10,000 to 200,000 in increments of 1,000 pesos, but everything else stays the same. Store as an object and plot to observe the changes.</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="countdown" id="timer_fdca0808" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:3;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section></section>
<section>
<section id="how-right-are-we" class="title-slide slide level1 center">
<h1>How right are we?</h1>

</section>
<section id="prediction-accuracy" class="slide level2">
<h2>Prediction accuracy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">The question with prediction is always: how accurate were we?</li>
<li class="fragment">If our model is predicting the outcome accurately that might be:
<ul>
<li class="fragment">a good sign that we are modeling the process that generates the outcome well</li>
<li class="fragment">useful for forcasting the future, or situations we don’t know about</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/medieval-archer.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="comparing-to-reality" class="slide level2">
<h2>Comparing to reality</h2>
<p>How good are our predictions? We could compare our estimate to a real country, say Jamaica in 2007:</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lifeExp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jamaica</td>
<td style="text-align: left;">Americas</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">72.567</td>
<td style="text-align: right;">2780132</td>
<td style="text-align: right;">7320.88</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
<div class="fragment">
<p>We can use Jamaica’s values as our scenario, and see what our model predicted:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>jamaica <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">continent =</span> <span class="st">"Americas"</span>, <span class="at">year =</span> <span class="dv">2007</span>, <span class="at">pop =</span> <span class="dv">2780132</span>, <span class="at">gdpPercap =</span> <span class="dv">7321</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pretty-close" class="slide level2">
<h2>Pretty close</h2>
<p>Actual:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lifeExp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jamaica</td>
<td style="text-align: left;">Americas</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">72.567</td>
<td style="text-align: right;">2780132</td>
<td style="text-align: right;">7320.88</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Estimate:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">augment</span>(life_model, <span class="at">newdata =</span> jamaica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  continent  year     pop gdpPercap .fitted
  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 Americas   2007 2780132      7321    72.5</code></pre>
</div>
</div>
</section>
<section id="is-this-really-a-prediction" class="slide level2">
<h2>Is this really a prediction?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment"><p>Our estimate of Jamaica is not <em>really</em> prediction, since we <em>used</em> that observation to fit our model</p></li>
<li class="fragment"><p>This is an <strong>in-sample</strong> prediction <span class="math inline">\(\rightarrow\)</span> seeing how well our model does at predicting the data that we used to generate it</p></li>
<li class="fragment"><p>“True” prediction is <strong>out-of-sample</strong> <span class="math inline">\(\rightarrow\)</span> using a model to generate predictions about something that <em>hasn’t happened yet</em></p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/fishing.jpeg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
<figcaption>Figure. Is catch and release really fishing?</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="out-of-sample-prediction" class="slide level2">
<h2>Out of sample prediction</h2>
<p>Imagine in the year 1957 we fit a model with the info we had available at the time:</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>gap_57 <span class="ot">=</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">1957</span>)</span>
<span id="cb35-2"><a></a>mod_57 <span class="ot">=</span> <span class="fu">lm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> pop <span class="sc">+</span> continent <span class="sc">+</span> year, <span class="at">data =</span> gap_57)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>Now it’s 2007, someone finds the model, and wants to know: how well could this model have predicted the future?</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>jamaica <span class="ot">=</span> <span class="fu">crossing</span>(<span class="at">continent =</span> <span class="st">"Americas"</span>, <span class="at">year =</span> <span class="dv">2007</span>, <span class="at">pop =</span> <span class="dv">2780132</span>, <span class="at">gdpPercap =</span> <span class="dv">7321</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>This is an <strong>out-of-sample</strong> prediction: our model has data before 1957, but our prediction is based off of Jamaica’s characteristics in 2007</p>
</div>
</section>
<section id="how-did-we-do" class="slide level2">
<h2>How did we do?</h2>
<p>Jamaica in 2007:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lifeExp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jamaica</td>
<td style="text-align: left;">Americas</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">72.6</td>
<td style="text-align: right;">2780132</td>
<td style="text-align: right;">7320.9</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<div class="fragment">
<p>What our 1957 model predicted for 2007 (out of sample):</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">.fitted</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Americas</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">2780132</td>
<td style="text-align: right;">7321</td>
<td style="text-align: right;">79.8</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
<div class="fragment">
<p>What our model with all the data predicted, 2007 included (in sample):</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">.fitted</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Americas</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">2780132</td>
<td style="text-align: right;">7321</td>
<td style="text-align: right;">72.5</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="out-of-sample-prediction-is-worse" class="title-slide slide level1 center">
<h1>Out of sample prediction is worse</h1>
<p>As a general rule, models will tend to perform <strong>worse</strong> out-of-sample than in-sample</p>
<div class="fragment">
<p>This is because the model is <strong>over-fitting</strong> the data <span class="math inline">\(\rightarrow\)</span> tailoring the model equation too closely to the data we have</p>
</div>
</section>
<section id="your-turn-the-movies" class="slide level2">
<h2>🚨 Your turn: 🎥 The movies 🎥🚨</h2>
<p>Using <code>movies</code>:</p>
<ol type="1">
<li class="fragment"><p>Fit a model that predicts gross (outcome) using genre1, duration, budget, year, imdb_score, and whether or not it’s in color.</p></li>
<li class="fragment"><p>Look up a movie in the dataset. How well does the model predict a movie that shares that movie’s characteristics?</p></li>
<li class="fragment"><p>Look up a movie on IMDB that came out after the data ends (2016). How well does your model predict that movie’s gross?</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="countdown" id="timer_6d3dc2f7" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>